<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="utf-8" />
    <title>Coursework 1</title>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <div id="lessons">
      <div class="card" v-for="(lesson, index) in lessons">

        <div class="product-info">
          <div class="details">
            <h4>Subject: {{ lesson.subject }}</h4>
            <h4>Location: {{ lesson.location }}</h4>
            <h4>Price: {{ lesson.price }}</h4>
            <h4>Spaces: {{ lesson.spaces }}</h4>
          </div>
          <div class="img"></div>
          <div class="treat-wrapper">
            <button class="btn draw-border" :id="'addToCart_' + index" v-on:click="reduce(index)">Add to cart</button>
          </div>
        </div>

      </div>
    </div>
  </body>
  
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

  <script type="module">
    import json_lessons from './assets/lessons.js'

    new Vue({
      el: '#lessons',
      data() {
        return {
          lessons: json_lessons
        }
      },
      methods: {
        reduce: function (index) {
          this.lessons[index].spaces--;
          if (this.lessons[index].spaces == 0) {
            document.getElementById("addToCart_"+index).disabled = true;
            document.getElementById("addToCart_"+index).innerHTML = "Not Available";
          }
        }
      }
    });

  </script>
</html>